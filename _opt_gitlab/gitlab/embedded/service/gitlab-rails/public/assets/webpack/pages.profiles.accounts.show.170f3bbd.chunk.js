(this.webpackJsonp=this.webpackJsonp||[]).push([[117],{2237:function(t,e,n){n(105),n(796),t.exports=n(2472)},2472:function(t,e,n){"use strict";n.r(e);n(24),n(28),n(26),n(50),n(58),n(38),n(27);var a=n(17),r=n(177),o=(n(30),n(93)),s=n.n(o),i=n(11),d=n(304),l=n(1),u=n(14),c={components:{GlModal:d.a},props:{actionUrl:{type:String,required:!0},rootUrl:{type:String,required:!0},initialUsername:{type:String,required:!0}},data:function(){return{isRequestPending:!1,username:this.initialUsername,newUsername:this.initialUsername}},computed:{path:function(){return Object(l.e)(Object(l.d)("Profiles|Current path: %{path}"),{path:"".concat(this.rootUrl).concat(this.username)})},modalText:function(){return Object(l.e)(Object(l.d)("Profiles|\nYou are going to change the username %{currentUsernameBold} to %{newUsernameBold}.\nProfile and projects will be redirected to the %{newUsername} namespace but this redirect will expire once the %{currentUsername} namespace is registered by another user or group.\nPlease update your Git repository remotes as soon as possible."),{currentUsernameBold:"<strong>".concat(s()(this.username),"</strong>"),newUsernameBold:"<strong>".concat(s()(this.newUsername),"</strong>"),currentUsername:s()(this.username),newUsername:s()(this.newUsername)},!1)}},methods:{onConfirm:function(){var t=this;this.isRequestPending=!0;var e=this.newUsername,n={user:{username:e}};return i.a.put(this.actionUrl,n).then((function(n){Object(u.a)(n.data.message,"notice"),t.username=e,t.isRequestPending=!1})).catch((function(e){throw Object(u.a)(e.response.data.message),t.isRequestPending=!1,e}))}},modalId:"username-change-confirmation-modal",inputId:"username-change-input",buttonText:Object(l.d)("Profiles|Update username")},m=n(4),p=Object(m.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:t.$options.inputId}},[t._v(t._s(t.s__("Profiles|Path")))]),t._v(" "),n("div",{staticClass:"input-group"},[n("div",{staticClass:"input-group-prepend"},[n("div",{staticClass:"input-group-text"},[t._v(t._s(t.rootUrl))])]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newUsername,expression:"newUsername"}],staticClass:"form-control",attrs:{id:t.$options.inputId,disabled:t.isRequestPending,required:"required"},domProps:{value:t.newUsername},on:{input:function(e){e.target.composing||(t.newUsername=e.target.value)}}})]),t._v(" "),n("p",{staticClass:"form-text text-muted"},[t._v(t._s(t.path))])]),t._v(" "),n("button",{staticClass:"btn btn-warning",attrs:{"data-target":"#"+t.$options.modalId,disabled:t.isRequestPending||t.newUsername===t.username,type:"button","data-toggle":"modal"}},[t._v("\n    "+t._s(t.$options.buttonText)+"\n  ")]),t._v(" "),n("gl-modal",{attrs:{id:t.$options.modalId,"header-title-text":t.s__("Profiles|Change username")+"?","footer-primary-button-text":t.$options.buttonText,"footer-primary-button-variant":"warning"},on:{submit:t.onConfirm}},[n("span",{domProps:{innerHTML:t._s(t.modalText)}})])],1)}),[],!1,null,null,null).exports,b=n(277),f=n(178),h={components:{DeprecatedModal:b.a},props:{actionUrl:{type:String,required:!0},confirmWithPassword:{type:Boolean,required:!0},username:{type:String,required:!0}},data:function(){return{enteredPassword:"",enteredUsername:""}},computed:{csrfToken:function(){return f.a.token},inputLabel:function(){var t;return t=this.confirmWithPassword?Object(l.a)("password"):Object(l.a)("username"),t="<code>".concat(t,"</code>"),Object(l.e)(Object(l.d)("Profiles|Type your %{confirmationValue} to confirm:"),{confirmationValue:t},!1)},text:function(){return Object(l.e)(Object(l.d)("Profiles|\nYou are about to permanently delete %{yourAccount}, and all of the issues, merge requests, and groups linked to your account.\nOnce you confirm %{deleteAccount}, it cannot be undone or recovered."),{yourAccount:"<strong>".concat(Object(l.d)("Profiles|your account"),"</strong>"),deleteAccount:"<strong>".concat(Object(l.d)("Profiles|Delete Account"),"</strong>")},!1)}},methods:{canSubmit:function(){return this.confirmWithPassword?""!==this.enteredPassword:this.enteredUsername===this.username},onSubmit:function(){this.$refs.form.submit()}}},v=Object(m.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("deprecated-modal",{attrs:{id:"delete-account-modal",title:t.s__("Profiles|Delete your account?"),text:t.text,"primary-button-label":t.s__("Profiles|Delete account"),"submit-disabled":!t.canSubmit(),kind:"danger"},on:{submit:t.onSubmit},scopedSlots:t._u([{key:"body",fn:function(e){return[n("p",{domProps:{innerHTML:t._s(e.text)}}),t._v(" "),n("form",{ref:"form",attrs:{action:t.actionUrl,method:"post"}},[n("input",{attrs:{type:"hidden",name:"_method",value:"delete"}}),t._v(" "),n("input",{attrs:{type:"hidden",name:"authenticity_token"},domProps:{value:t.csrfToken}}),t._v(" "),n("p",{attrs:{id:"input-label"},domProps:{innerHTML:t._s(t.inputLabel)}}),t._v(" "),t.confirmWithPassword?n("input",{directives:[{name:"model",rawName:"v-model",value:t.enteredPassword,expression:"enteredPassword"}],staticClass:"form-control",attrs:{name:"password",type:"password","aria-labelledby":"input-label"},domProps:{value:t.enteredPassword},on:{input:function(e){e.target.composing||(t.enteredPassword=e.target.value)}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.enteredUsername,expression:"enteredUsername"}],staticClass:"form-control",attrs:{name:"username",type:"text","aria-labelledby":"input-label"},domProps:{value:t.enteredUsername},on:{input:function(e){e.target.composing||(t.enteredUsername=e.target.value)}}})])]}}])})}),[],!1,null,null,null).exports;function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}document.addEventListener("DOMContentLoaded",(function(){a.default.use(r.a);var t=document.getElementById("update-username");new a.default({el:t,components:{UpdateUsername:p},render:function(e){return e("update-username",{props:g({},t.dataset)})}});var e=document.getElementById("delete-account-button"),n=document.getElementById("delete-account-modal");new a.default({el:n,components:{deleteAccountModal:v},mounted:function(){e.classList.remove("disabled")},render:function(t){return t("delete-account-modal",{props:{actionUrl:n.dataset.actionUrl,confirmWithPassword:Boolean(n.dataset.confirmWithPassword),username:n.dataset.username}})}})}))},277:function(t,e,n){"use strict";var a=n(1);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o={name:"DeprecatedModal",props:{id:{type:String,required:!1},title:{type:String,required:!1},text:{type:String,required:!1},hideFooter:{type:Boolean,required:!1,default:!1},kind:{type:String,required:!1,default:"primary"},modalDialogClass:{type:String,required:!1,default:""},closeKind:{type:String,required:!1,default:"default"},closeButtonLabel:{type:String,required:!1,default:Object(a.a)("Cancel")},primaryButtonLabel:{type:String,required:!1,default:""},secondaryButtonLabel:{type:String,required:!1,default:""},submitDisabled:{type:Boolean,required:!1,default:!1}},computed:{btnKindClass:function(){return r({},"btn-".concat(this.kind),!0)},btnCancelKindClass:function(){return r({},"btn-".concat(this.closeKind),!0)}},methods:{emitCancel:function(t){this.$emit("cancel",t)},emitSubmit:function(t){this.$emit("submit",t)}}},s=n(4),i=Object(s.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-open"},[n("div",{staticClass:"modal",class:t.id?"":"d-block",attrs:{id:t.id,role:"dialog",tabindex:"-1"}},[n("div",{staticClass:"modal-dialog",class:t.modalDialogClass,attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[t._t("header",[n("h4",{staticClass:"modal-title float-left"},[t._v(t._s(t.title))]),t._v(" "),n("button",{staticClass:"close float-right",attrs:{type:"button","data-dismiss":"modal","aria-label":t.__("Close")},on:{click:function(e){return t.emitCancel(e)}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])],2),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("body",[n("p",[t._v(t._s(t.text))])],{text:t.text})],2),t._v(" "),t.hideFooter?t._e():n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn",class:t.btnCancelKindClass,attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.emitCancel(e)}}},[t._v("\n            "+t._s(t.closeButtonLabel)+"\n          ")]),t._v(" "),t.secondaryButtonLabel?t._t("secondary-button",[t.secondaryButtonLabel?n("button",{staticClass:"btn",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n              "+t._s(t.secondaryButtonLabel)+"\n            ")]):t._e()]):t._e(),t._v(" "),t.primaryButtonLabel?n("button",{staticClass:"btn js-primary-button",class:t.btnKindClass,attrs:{disabled:t.submitDisabled,type:"button","data-dismiss":"modal","data-qa-selector":"save_changes_button"},on:{click:function(e){return t.emitSubmit(e)}}},[t._v("\n            "+t._s(t.primaryButtonLabel)+"\n          ")]):t._e()],2)])])]),t._v(" "),t.id?t._e():n("div",{staticClass:"modal-backdrop fade show"})])}),[],!1,null,null,null);e.a=i.exports},304:function(t,e,n){"use strict";n(104);var a=n(0),r=n.n(a),o=["danger","primary","success","warning"],s=["sm","md","lg","xl"],i={name:"DeprecatedModal2",props:{id:{type:String,required:!1,default:null},modalSize:{type:String,required:!1,default:"md",validator:function(t){return s.includes(t)}},headerTitleText:{type:String,required:!1,default:""},footerPrimaryButtonVariant:{type:String,required:!1,default:"primary",validator:function(t){return o.includes(t)}},footerPrimaryButtonText:{type:String,required:!1,default:""}},computed:{modalSizeClass:function(){return"md"===this.modalSize?"":"modal-".concat(this.modalSize)}},mounted:function(){r()(this.$el).on("shown.bs.modal",this.opened).on("hidden.bs.modal",this.closed)},beforeDestroy:function(){r()(this.$el).off("shown.bs.modal",this.opened).off("hidden.bs.modal",this.closed)},methods:{emitCancel:function(t){this.$emit("cancel",t)},emitSubmit:function(t){this.$emit("submit",t)},opened:function(){this.$emit("open")},closed:function(){this.$emit("closed")}}},d=n(4),l=Object(d.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal fade",attrs:{id:t.id,tabindex:"-1",role:"dialog"}},[n("div",{staticClass:"modal-dialog",class:t.modalSizeClass,attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[t._t("header",[n("h4",{staticClass:"modal-title"},[t._t("title",[t._v(" "+t._s(t.headerTitleText)+" ")])],2),t._v(" "),n("button",{staticClass:"close js-modal-close-action",attrs:{"aria-label":t.s__("Modal|Close"),type:"button","data-dismiss":"modal"},on:{click:function(e){return t.emitCancel(e)}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])],2),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("default")],2),t._v(" "),n("div",{staticClass:"modal-footer"},[t._t("footer",[n("button",{staticClass:"btn js-modal-cancel-action qa-modal-cancel-button",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.emitCancel(e)}}},[t._v("\n            "+t._s(t.s__("Modal|Cancel"))+"\n          ")]),t._v(" "),n("button",{staticClass:"btn js-modal-primary-action qa-modal-primary-button",class:"btn-"+t.footerPrimaryButtonVariant,attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.emitSubmit(e)}}},[t._v("\n            "+t._s(t.footerPrimaryButtonText)+"\n          ")])])],2)])])])}),[],!1,null,null,null);e.a=l.exports}},[[2237,1,0,7]]]);
//# sourceMappingURL=pages.profiles.accounts.show.170f3bbd.chunk.js.map